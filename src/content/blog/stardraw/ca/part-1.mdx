---
title: 'StarDraw ‚ú®'
description: "Inici del desenvolupament d'StarDraw, un projecte per dominar React i crear el meu primer projecte p√∫blic."
pubDate: '2025-11-22 20:28'
updatedDate: '2025-12-10 09:29'
tags: ['react', 'stardraw', 'excalidraw']
series: 'StarDraw'
heroImage: '/assets/stardraw/hero-stardraw.png'
descriptionHeroImage: "Captura d'un test de Konva"
ogImage: '/assets/stardraw/ogImg-stardraw.png'
lang: 'ca'
---

import CodeTabs from '../../../../components/mdx/CodeTabs.astro';
import GithubCommitLink from '../../../../components/mdx/GithubCommitLink.astro';

Inicio la secci√≥ amb aquest article dedicat al que probablement ser√† el meu primer desenvolupament p√∫blic. Aquests articles no pretenen ser guies per ensenyar res a ning√∫, m√©s aviat √©s un diari del proc√©s de desenvolupament.

Cada projecte el comen√ßar√© dividint les idees i analitzant les necessitats. Intentar√© plasmar la feina el m√©s detallada possible i segurament si despr√©s veig que cal fer canvis o actualitzacions en el codi que influeixin en aquest article intentar√© afegir refer√®ncies.

## El meu objectiu

El que pretenc √©s barallar-me amb <span class='text-[--tangerine-hover] dark:text-[--tangerine]'>React</span> per aprendre'l millor juntament amb <span class='text-[--tangerine-hover] dark:text-[--tangerine]'>TypeScript</span> creant una aplicaci√≥ des de zero i utilitzant tecnologies modernes. La idea neix simplement de la necessitat, ja que a la feina estic intentant diversificar el meu perfil perqu√® fins ara porto 4 anys amb <span class='text-[--tangerine-hover] dark:text-[--tangerine]'>Power Apps</span>, uns pocs mesos en la soluci√≥ d'errors d'estils en projectes ja en producci√≥ amb React i en el meu propi lloc desenvolupat amb <span class='text-[--tangerine-hover] dark:text-[--tangerine]'>Astro</span>. Finalment necessito omplir el meu portfolio amb algun projecte aix√≠ que si aquest projecte t√© √®xit podria ser el primer.

Ja de pas, tamb√© aquest projecte em dona contingut per donar-li una mica de vida al meu portfolio i crear alguna cosa que tenia ganes de fer des de fa molt de temps, un jard√≠ digital. Un lloc on deixar les meves idees, descobriments o progressos en el desenvolupament.

En el transcurs de desenvolupament d'aquest projecte, StarDraw ‚ú®üòé no busco nom√©s clonar funcionalitats, sin√≥ ja de pas <span class='text-[--tangerine-hover] dark:text-[--tangerine]'>entendre el "com" funcionen algunes coses per darrere</span> i aportar algunes idees pr√≤pies que facin la meva eina m√©s √∫til del que a mi m'ofereix Excalidraw. El projecte ser√† FOSS i es publicar√† a GitHub perqu√® qualsevol pugui usar-lo o contribuir-hi. A m√©s, sospesar√© la idea de mantenir-la en producci√≥ si no es disparen els costos.

Arribats a aquest punt, les tecnologies que estan decidides s√≥n:

- React 19 + Vite + TypeScript

I les alternatives en respectives tecnologies que em plantejo investigar s√≥n:

- Konva o Fabric.js
- Overwatch o Zustand
- SortableJS o React DnD

### La idea

Mentre aprenc, vull construir un clon d'Excalidraw per√≤ personalitzat al meu gust, tant en disseny com en funcionalitats, amb alguns extres donat que trobo a faltar coses en l'eina original.

- Millor control dels colors en mode fosc.
- Guardar/exportar directament una imatge PNG/JPG de qualsevol element seleccionat del canvas.
- Ajust de quadr√≠cula per als elements.
- M√©s opcions de tipografia per als textos.
- Millor gesti√≥ de mides de text.
- Millor gesti√≥ de colors de text.
- Suport per a diagrames tipus de nodes o bases de dades.

Parts importants que vull mantenir s√≥n la <span class='text-[--tangerine-hover] dark:text-[--tangerine]'>filosofia "local first"</span> i la possibilitat d'exportar els projectes en un format que m√©s tard es pugui carregar i continuar editant.

### Stack Tecnol√≤gic

#### 1. React 19 + Vite + TypeScript
No he treballat gaire en projectes des de zero amb React, per√≤ per tot el que tinc llegit fins ara s√© que √©s una tecnologia madura, de llarg recorregut i amb moltes biblioteques que li donen suport que faciliten fer molta varietat de coses, i per aix√≤ la trio. Per√≤ el m√©s important, com he mencionat, tinc en concret la necessitat d'aprendre'l b√© per la meva feina juntament amb TypeScript aix√≠ que aix√≤ est√† decidit des de l'inici.

#### 2. Biblioteca de canvas
Aquesta seria la pe√ßa m√©s important del projecte, √≤bviament √©s una cosa que no construir√© de zero, avui no ü§£, i com no tinc ni idea de com desenvolupar aquest tipus d'aplicaci√≥ li pregunto a Gemini 3 a veure qu√® em recomana usar i la seva resposta √©s <span class='text-[--tangerine-hover] dark:text-[--tangerine]'>Konva</span>. Segons em diu, Konva √©s una biblioteca per al maneig del canvas.

<div class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-xl rounded-tl-none border border-blue-100 dark:border-blue-800/50 text-blue-900 dark:text-blue-100 relative mb-6 mt-2 shadow-sm">
  <p class="m-0 italic">"Treballar directament amb l'API de Canvas del navegador √©s verb√≥s i complex de mantenir. Konva ens ofereix una abstracci√≥ orientada a objectes (capes, grups, formes) i `react-konva` ens permet manejar-ho de forma declarativa, integrant-se perfectament amb el cicle de vida de React."</p>
</div>

B√©, i com no em quedar√© amb la primera opci√≥ segueixo buscant alternatives, i pel cam√≠ descobreixo <span class='text-[--tangerine-hover] dark:text-[--tangerine]'>Fabric.js</span>, que tamb√© √©s una biblioteca per al maneig del canvas for√ßa utilitzada. Davant la indecisi√≥ i com soc una mica fan√†tic del rendiment busco documentaci√≥ al respecte i trobo un article recent.

<a href="https://medium.com/@www.blog4j.com/konva-js-vs-fabric-js-in-depth-technical-comparison-and-use-case-analysis-9c247968dd0f" target="_blank noreferrer noopener">Konva.js vs Fabric.js: In-depth Technical Comparison and Use Case Analysis</a>

La conclusi√≥ que es treu √©s que Konva ofereix un millor rendiment quan s'enfronta a molta c√†rrega. En el cas de Fabric.js, no √©s mala biblioteca en absolut, el seu avantatge √©s que √©s m√©s f√†cil d'utilitzar a canvi de menor rendiment.

√âs dif√≠cil decidir, el que penso √©s que √©s probable que el rendiment que ofereix Konva no l'arribi a aprofitar mai ja que expliquen que est√† orientat a la creaci√≥ de jocs, i aix√≤ √©s dir molt. Fabric.js pel seu costat √©s probable que m'ajudi a no escalfar-me massa el cap i per tant a no perdre massa temps... i escolta! si canvio d'opini√≥ crec que mai √©s tard per refactoritzar i provar amb Konva un cop el projecte estigui acabat. Aix√≠ que per ara crec que provar√© amb Fabric.js.

#### 3. Maneig d'estats globals
Aix√≤ ho tinc bastant clar. <span class='text-[--tangerine-hover] dark:text-[--tangerine]'>Zustand</span> √©s una biblioteca lleugera i molt utilitzada. No √©s l'√∫nica opci√≥, i pel cam√≠ llegeixo sobre un nou competidor que t√© molt millor rendiment, <span class='text-[--tangerine-hover] dark:text-[--tangerine]'>Overwatch TS</span>, per√≤ em quedo amb Zustand perqu√® tampoc √©s pla de complicar-me. M'apunto el d'Overwatch per a algun futur projecte. Aqu√≠ la meta √©s aprendre React i per aix√≤ no m'he de complicar massa, a m√©s aquesta filosofia √©s la correcta si no vull acabar abandonant el projecte, necessito trencar la barrera i publicar el meu primer projecte.

Us deixo amb un article que compara dues de les principals biblioteques de maneig d'estats globals i Overwatch TS. O sigui, de veritat, si √©s cert el d'Overwatch TS sembla que els passa la m√† per la cara. Per√≤ √©s una mica el mateix cas de Konva ¬øval la pena per a projectes petits de baixes exig√®ncies?

<a href="https://medium.com/@karandeepsinghworkspace/redux-toolkit-vs-zustand-vs-overwatch-who-wins-the-performance-benchmark-e090a504b1e7" target="_blank noreferrer noopener">Redux Toolkit vs Zustand vs Overwatch: Who wins the performance benchmark?</a>

#### 4. Eines auxiliars
Vaig preguntar a Gemini 3 algunes coses respecte a si Fabric.js o Konva oferien funcionalitats per organitzar capes o elements de la UI f√†cilment amb Drag & Drop i em va recomanar utilitzar <span class='text-[--tangerine-hover] dark:text-[--tangerine]'>SortableJS</span>.

Suposo que m√©s endavant quan arribi al tema ho investigar√© millor, per√≤ per ara vaig veure aquest altre article que compara tres biblioteques per manejar drag & drop en React.

<a href="https://npm-compare.com/es-ES/react-dnd,sortablejs,vuedraggable" target="_blank noreferrer noopener">react-dnd, sortablejs, vuedraggable</a>

Finalment, mentre feia proves vaig comen√ßar a usar les icones <span class='text-[--tangerine-hover] dark:text-[--tangerine]'>lucide-react</span> aix√≠ que en aquest projecte les seguir√© usant.

### Primers passos del desenvolupament

El b√†sic, creo el projecte amb Vite i un template de React amb TypeScript.
Despr√©s, instal¬∑lar Fabric.js, Zustand, Tailwind i lucide-react.

<CodeTabs 
  items={[
    { 
      label: 'npm', 
      code: 'npm create vite@latest -- --template react-ts\nnpm install fabric zustand tailwindcss lucide-react', 
      lang: 'bash' 
    },
    { 
      label: 'pnpm', 
      code: 'pnpm create vite@latest -- --template react-ts\npnpm add fabric zustand tailwindcss lucide-react', 
      lang: 'bash' 
    },
    { 
      label: 'yarn', 
      code: 'yarn create vite --template react-ts\nyarn add fabric zustand tailwindcss lucide-react', 
      lang: 'bash' 
    }
  ]}
/>

Respecte a Tailwind, explicar√© un moment els seg√ºents passos. Des de la versi√≥ 4 Tailwind s'integra amb Vite mitjan√ßant un plugin, un cop instal¬∑lat tailwindcss, on abans calia inicialitzar-lo ara cal instal¬∑lar el plugin. Executarem aquest comandament per instal¬∑lar-lo com a depend√®ncia de desenvolupament amb -D.

<CodeTabs 
  items={[
    { label: 'npm', code: 'npm install -D @tailwindcss/vite', lang: 'bash' },
    { label: 'pnpm', code: 'pnpm add -D @tailwindcss/vite', lang: 'bash' },
    { label: 'yarn', code: 'yarn add -D @tailwindcss/vite', lang: 'bash' }
  ]}
/>
Un cop instal¬∑lat el plugin, cal afegir-lo a l'arxiu de configuraci√≥ de Vite fent l'import de tailwind i afegint-lo com a plugin.

<CodeTabs 
  items={[
    { 
      label: 'vite.config.ts', 
      code: `import tailwindcss from '@tailwindcss/vite';

export default defineConfig({
    plugins: [tailwindcss(), ...],
});`, 
      lang: 'ts' 
    }
  ]}
/>

El resultat en l'actualitat √©s una cosa com aquesta:

<CodeTabs 
  items={[
    { 
      label: 'vite.config.ts', 
      code: `import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
import tailwindcss from '@tailwindcss/vite' // Importem el plugin

export default defineConfig({
  plugins: [
    react(),
    tailwindcss(),  // I l'afegim aqu√≠. Plugins que modifiquen el 
                    // build (com React o Tailwind) van aqu√≠.
  ],
})`, 
      lang: 'ts' 
    }
  ]}
/>

I ara reempla√ßa el contingut d'`index.css` pel seg√ºent import:

<CodeTabs 
  items={[
    { 
      label: 'index.css', 
      code: `@import "tailwindcss"`, 
      lang: 'css' 
    }
  ]}
/>

Ja arribem als √∫ltims passos, cal netejar una mica el codi per defecte que genera la plantilla de Vite. Nom√©s hem d'eliminar l'arxiu `src/App.css`, netejar l'arxiu `src/App.tsx` i assegurar-nos que `src/main.tsx` contingui el b√†sic.

<CodeTabs 
  items={[
    { 
      label: 'App.tsx',
      code: `function App() {
    return (
      <div>
        <h1 className="text-3xl font-bold underline">Star Draw</h1>
      </div>
    )
  }

export default App`, 
      lang: 'tsx' 
    },
    { 
      label: 'main.tsx', 
      code: `import { StrictMode } from 'react'
import { createRoot } from 'react-dom/client'
import './index.css'
import App from './App.tsx'

createRoot(document.getElementById('root')!).render(
  <StrictMode>
    <App />
  </StrictMode>,
)
`, 
      lang: 'tsx' 
    }
  ]}
/>

Esborrar√© tamb√© els arxius `assets/react.svg` i `assets/vite.svg`.

Ara, idealment, cada vegada que completem una pe√ßa de codi, canvi o caracter√≠stica el seu √©s guardar canvis a git amb un commit, per√≤ no tenim repositori inicialitzat, per la qual cosa l'inicialitzarem creant el repositori de git local i despr√©s el pujarem a GitHub.

<CodeTabs 
  items={[
    { label: 'bash', code: `git init
git add .
git commit -m "Initial commit"
git branch -M main
git remote add origin https://github.com/hunkstalker/stardraw
git push -u origin main`, 
lang: 'bash' }
  ]}
/>

Recordatori:

<div class="text-base">

- **`git init`**: Inicialitza el repositori de git local.
- **`git add .`**: La paraula `add` serveix per afegir canvis a l'stage (preparaci√≥) i el punt `.` selecciona tots els arxius.
- **`git commit -m "Initial commit"`**: Crea el primer commit. El flag `-m` permet afegir el missatge del commit directament.
- **`git branch -M main`**: Renombra la branca actual a `main`.
    > **Nota**: Aix√≤ √©s √∫til si la teva configuraci√≥ per defecte crea la branca com a `master`.
- **`git remote add origin ...`**: Vincula el repositori local amb el remot. `origin` √©s l'√†lies que usarem per referir-nos a la URL del repositori (https://github.com/hunkstalker/stardraw).
- **`git push -u origin main`**: Puja els canvis a GitHub. El flag `-u` vincula la teva branca local `main` amb la remota `origin/main`, permetent-te usar simplement `git push` en el futur.

</div>

Al final de cada article tractar√© de deixar l'enlla√ß al commit a GitHub concret perqu√® es pugui veure com va quedar el codi exacte en aquest punt.

<div class="mt-4 mb-6">
  <GithubCommitLink 
    href="https://github.com/hunkstalker/stardraw/tree/b1850d4a0043bd86df6b08dbb607b3b89fe7396f"
    title="Codi final - Initial commit"
  />
</div>

B√©! I amb aix√≤ tinc tot el proc√©s inicial de crear un projecte a Vite + React deixant-lo completament net. I el tenim pujat a GitHub. Aqu√≠ quedar√† per quan qualsevol vulgui consultar-lo. <span class='text-[--tangerine-hover] dark:text-[--tangerine]'>Aix√≤ no √©s una guia, per√≤ podeu aprendre amb mi.</span>

En la pr√≤xima entrada em posar√© amb l'estructura del projecte creant les carpetes i arxius principals i creant el Canvas amb Fabric.js.
