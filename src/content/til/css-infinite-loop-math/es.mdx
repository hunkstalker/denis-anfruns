---
title: "Matemáticas para un loop infinito CSS perfecto"
lang: "es"
---

import CodeTabs from '../../../components/mdx/CodeTabs.astro';

¿Alguna vez has intentado crear un carrusel o gradiente infinito y notas un "salto" al final? La clave para que sea imperceptible está en las matemáticas.

### El Problema
Supongamos que tienes una imagen de fondo que es 4 veces más grande que tu contenedor (`background-size: 400%`) y quieres que se desplace creando un bucle infinito.

Si tu imagen tiene un patrón que se repite (por ejemplo `[A, B, A, B]`), y animas el `background-position` de `0%` a `-100%` (o valores similares), a menudo verás un corte brusco.

### La Solución Matemática

Para un loop perfecto, necesitas calcular el punto exacto donde la imagen vuelve a ser idéntica al inicio.

La fórmula para `background-position` en porcentaje es contraintuitiva:
> `(ancho_contenedor - ancho_imagen) * porcentaje`

Para un `background-size: 400%`:
1.  La imagen mide 4 unidades. El contenedor mide 1 unidad.
2.  Queremos desplazarnos **2 unidades** (la mitad de la imagen, suponiendo que hemos duplicado el contenido para el loop).
3.  El rango total de movimiento posible es `4 - 1 = 3` unidades.
4.  El porcentaje objetivo es: `2 (desplazamiento deseado) / 3 (rango total) = 0.6666...`
5.  O sea: **66.666%**.

<CodeTabs 
  items={[
    { 
      label: 'CSS', 
      code: `@keyframes gradient-move {
    0% { background-position: 0% 50%; }
    /* El número mágico para background-size: 400% */
    100% { background-position: 66.666% 50%; }
}`, 
      lang: 'css' 
    }
  ]}
/>

Usando ese valor, cuando la animación llega al 100%, la imagen está visualmente en la posición idéntica al 0%, haciendo que el reinicio de la animación sea invisible.
