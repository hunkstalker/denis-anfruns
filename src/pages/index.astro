---
import BaseLayout from '../layouts/BaseLayout.astro'
import Nav from '../components/Nav.astro'
import Header from '../components/Header.astro'

const siteTitle = `Denis A. M. Portfolio`
const lang = 'es'
---

<script is:inline>
	const userLang = navigator.language || navigator.userLanguage
	const savedLang = localStorage.getItem('selectedLang')

	if (window.location.pathname === '/') {
		// Si hay preferencia guardada, la respetamos
		if (savedLang) {
			if (savedLang === 'ca') {
				window.location.href = '/ca'
			} else if (savedLang === 'en') {
				window.location.href = '/en'
			}
			// Si es 'es', nos quedamos aqu√≠
		} else {
			// Si no hay preferencia, usamos el idioma del navegador
			if (userLang.startsWith('ca')) {
				window.location.href = '/ca'
			} else if (!userLang.startsWith('es')) {
				window.location.href = '/en'
			}
		}
	}
</script>
<BaseLayout siteTitle={siteTitle} lang={lang}>
	<Nav lang={lang} />
	<div class='container flex-1'>
		<Header lang={lang} />
	</div>
	<div class="bg-grid fixed inset-0 -z-10 h-full w-full"></div>

	<style>
		.bg-grid {
			background-size: 40px 40px;
			background-image: radial-gradient(circle, rgba(0, 0, 0, 0.25) 1.5px, transparent 1.5px);
			background-position: center top;
			mask-image: radial-gradient(circle at center 20%, black 15%, transparent 100%);
			-webkit-mask-image: radial-gradient(circle at center 20%, black 15%, transparent 100%);
		}

		:global(.dark) .bg-grid {
			background-image: radial-gradient(circle, rgba(255, 255, 255, 0.25) 1.5px, transparent 1.5px);
		}
	</style>
</BaseLayout>
