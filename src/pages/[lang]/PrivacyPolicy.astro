---
import { getCollection } from 'astro:content'
import BaseLayout from '../../layouts/BaseLayout.astro'
import BackLink from '../../components/ui/BackLink.astro'
import Nav from '../../components/layout/Nav.astro'

export async function getStaticPaths() {
	const pages = await getCollection('privacy')

	// Filter out 'es' since it's handled by src/pages/PrivacyPolicy.astro
	const filteredPages = pages.filter((page) => page.slug !== 'es')

	return filteredPages.map((page) => {
		const lang = page.slug
		return {
			params: { lang },
			props: { page },
		}
	})
}

const { page } = Astro.props
const { Content } = await page.render()

// Map del texto del botón
// Map del texto del botón
const buttonText = {
	es: 'Volver',
	ca: 'Tornar',
	en: 'Back',
}

const lang = page.slug as keyof typeof buttonText
const btnText = buttonText[lang] || buttonText.es
---

<BaseLayout siteTitle={page.data.title} lang={lang}>
	<Nav lang={lang} />
	<main class="container mx-auto px-4 pb-12 pt-20 md:pt-28">
		<div class="grid grid-cols-1 gap-8 lg:grid-cols-12 lg:gap-12">
			<div class="lg:col-span-8 lg:col-start-3">
				<BackLink href="#" class="go-back" label={btnText} />
				<h1
					class="animate-fade-in-up mb-6 text-3xl font-bold leading-tight delay-100 dark:text-zinc-200 md:text-4xl"
				>
					{page.data.title}
				</h1>
				<hr class="animate-fade-in-up my-8 border-zinc-200 delay-300 dark:border-zinc-800" />
				<article
					class="prose prose-lg max-w-none dark:prose-invert prose-a:text-[--tangerine] hover:prose-a:text-[--tangerine-hover]"
				>
					<Content />
				</article>
			</div>
		</div>
	</main>
</BaseLayout>
