---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';

export async function getStaticPaths() {
  const pages = await getCollection('privacy');
  
  // Filter out 'es' since it's handled by src/pages/PrivacyPolicy.astro
  const filteredPages = pages.filter(page => page.slug !== 'es');
  
  console.log(`[PrivacyPolicy] Generating paths for: ${filteredPages.map(p => p.slug).join(', ')}`);

  return filteredPages.map((page) => {
    const lang = page.slug;
    return {
      params: { lang },
      props: { page },
    };
  });
}

const { page } = Astro.props;
const { Content } = await page.render();

// Map del texto del bot√≥n
const buttonText = {
  es: "Ir al inicio",
  ca: "Anar a l'inici",
  en: "Go to home"
};

const lang = page.slug as keyof typeof buttonText;
const homeLink = lang === 'es' ? '/' : `/${lang}/`;
const btnText = buttonText[lang] || buttonText.es;
---

<BaseLayout siteTitle={page.data.title} lang={lang}>
  <main class="privacy">
    <Content />
    <a href={homeLink} class="inline-block px-6 py-3 mt-8 text-sm font-bold text-zinc-200 uppercase transition-colors duration-200 transform bg-zinc-800 rounded-lg hover:bg-zinc-500">{btnText}</a>
  </main>

  <style is:global>
    .privacy {
      max-width: 800px;
      margin: 2rem auto;
      padding: 1rem;
      line-height: 1.7;
      font-size: 1.05rem;
    }
    .privacy h1 { font-weight: 700; margin-top: 1.6rem; font-size: 2rem; }
    .privacy h2 { font-weight: 700; margin-top: 1.6rem; font-size: 1.5rem; }
    .privacy p { margin-bottom: 1rem; }
    .privacy ul { list-style-type: disc; margin-left: 1.5rem; margin-bottom: 1rem; }
    .privacy a { color: oklch(75% 0.183 55.934); text-decoration: none; font-weight: bold; }
    /* Override button style specifically since it's an anchor tag inside .privacy */
    .privacy a.inline-block { color: white; font-weight: bold; text-decoration: none; }
  </style>
</BaseLayout>
