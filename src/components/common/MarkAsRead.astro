---
interface Props {
	slug: string
	collection: 'devlogs' | 'notes'
}

const { slug, collection } = Astro.props
const key = collection === 'devlogs' ? 'blog:read-posts' : 'notes:read-posts'
// Using legacy keys for data preservation if desired? User didn't specify. 
// "collection" prop is passed to `markPostAsRead`. Let's see what that function does.
// If markPostAsRead uses the collection string as part of the key directly, changing the string here changes the key.
// But lines 12-19 call markPostAsRead(slug, collection).
// So I should check read-status.ts.
// For now, I'll update interface but I must check read-status.ts.
---

<script>
	import { markPostAsRead } from '@utils/read-status'

	const element = document.getElementById('mark-as-read-data')
	if (element) {
		const { slug, collection } = JSON.parse(element.dataset.info || '{}')
		if (slug && collection) {
			markPostAsRead(slug, collection)
		}
	}
</script>

<div id='mark-as-read-data' data-info={JSON.stringify({ slug, collection })} style='display:none;'>
</div>
