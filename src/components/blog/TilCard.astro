---
import ArrowLink from '../../icons/arrow-link.svg'
import type { TilPost } from '../../utils/til-content'

interface Props {
	post: TilPost
	lang: 'es' | 'en' | 'ca'
	delay?: number
}

const { post, lang, delay = 0 } = Astro.props
---

<style>
	.animate-fade-in-up {
		animation: fadeInUp 0.5s ease-out both;
	}

	@keyframes fadeInUp {
		from {
			opacity: 0;
			transform: translateY(20px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}
</style>

<article
	class='til-card animate-fade-in-up group relative flex flex-col gap-2 rounded-xl border border-zinc-200 bg-white p-4 shadow-sm transition-shadow duration-300 hover:border-black/15 hover:shadow-md dark:border-zinc-700/50 dark:bg-zinc-800 dark:hover:border-white/15'
	style={`animation-delay: ${delay}ms`}>
	<div class='mb-1 flex items-center justify-between gap-2'>
		<time
			class='text-xs flex items-center gap-3 text-zinc-500'
			datetime={post.data.pubDate.toISOString()}>
			{post.data.pubDate.toLocaleDateString(undefined, {
				month: 'short',
				day: 'numeric',
				year: 'numeric',
			})}
		</time>
	</div>

	<p class='mb-4 line-clamp-2 dark:text-white'>
		<a
			href={
				lang === 'es'
					? `/til/${post.slug.split('/')[0]}/`
					: `/${lang}/til/${post.slug.split('/')[0]}/`
			}>
			<span class='absolute inset-0' />
			{post.data.title}
		</a>
	</p>
	<div class='flex items-center gap-2 text-sm font-medium text-[--tangerine-hover] dark:text-[--tangerine]'>
		Leer nota
		<ArrowLink />
	</div>
</article>
