---
import InfoIcon from '../../icons/info-circle.svg'
import WarningIcon from '../../icons/warning-triangle.svg'
import ErrorIcon from '../../icons/error-circle.svg'
import SuccessIcon from '../../icons/check-circle.svg'

interface Props {
	type?: 'info' | 'warning' | 'error' | 'success'
	title?: string
	filled?: boolean | string
}

const { type = 'info', title, filled = false } = Astro.props
const isFilled = filled === true || filled === '' || filled === 'true'

const styles = {
	info: {
		container: isFilled
			? 'bg-blue-100 dark:bg-blue-500/30 border-2 border-blue-500 text-blue-900 dark:text-blue-100'
			: 'bg-blue-50 dark:bg-blue-500/10 border border-blue-200 dark:border-blue-500/20 text-blue-900 dark:text-blue-200',
		iconColor: isFilled ? 'text-blue-700 dark:text-blue-300' : 'text-blue-600 dark:text-blue-400',
	},
	warning: {
		container: isFilled
			? 'bg-amber-100 dark:bg-amber-500/30 border-2 border-amber-500 text-amber-900 dark:text-amber-100'
			: 'bg-amber-50 dark:bg-amber-500/10 border border-amber-200 dark:border-amber-500/20 text-amber-900 dark:text-amber-200',
		iconColor: isFilled ? 'text-amber-700 dark:text-amber-300' : 'text-amber-600 dark:text-amber-400',
	},
	error: {
		container: isFilled
			? 'bg-red-100 dark:bg-red-500/30 border-2 border-red-500 text-red-900 dark:text-red-100'
			: 'bg-red-50 dark:bg-red-500/10 border border-red-200 dark:border-red-500/20 text-red-900 dark:text-red-200',
		iconColor: isFilled ? 'text-red-700 dark:text-red-300' : 'text-red-600 dark:text-red-400',
	},
	success: {
		container: isFilled
			? 'bg-green-100 dark:bg-green-500/30 border-2 border-green-500 text-green-900 dark:text-green-100'
			: 'bg-green-50 dark:bg-green-500/10 border border-green-200 dark:border-green-500/20 text-green-900 dark:text-green-200',
		iconColor: isFilled ? 'text-green-700 dark:text-green-300' : 'text-green-600 dark:text-green-400',
	},
}

const colors = {
	info: '#3b82f6',
	warning: '#f59e0b',
	error: '#ef4444',
	success: '#22c55e',
}
const baseColor = colors[type]
const inlineStyle = isFilled ? `border: 2px solid ${baseColor}; background-color: ${baseColor}30;` : ''

const currentStyle = styles[type]
---

<div class={`p-4 rounded-xl ${currentStyle.container} relative my-6 shadow-sm`} style={inlineStyle}>
	<div class='flex gap-3'>
		<div class={`shrink-0 mt-0.5 ${currentStyle.iconColor}`}>
			{type === 'info' && <InfoIcon />}
			{type === 'warning' && <WarningIcon />}
			{type === 'error' && <ErrorIcon />}
			{type === 'success' && <SuccessIcon />}
		</div>
		<div class='flex-1'>
			{title && <h5 class='font-bold mb-1'>{title}</h5>}
			<div class='text-sm leading-relaxed prose prose-sm dark:prose-invert max-w-none prose-p:my-0 prose-ul:my-0 prose-ol:my-0'>
				<slot />
			</div>
		</div>
	</div>
</div>
