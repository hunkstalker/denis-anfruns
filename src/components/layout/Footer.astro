---
import { useTranslations } from '../../i18n/utils'
import SocialLinks from '../ui/SocialLinks.astro'
import AstroLogo from '../../icons/astro-logo.svg'
import GithubFill from '../../icons/github-fill.svg'

interface Props {
	currentPath?: string
	lang?: 'es' | 'en' | 'ca'
}

const { lang = 'es' } = Astro.props
const t = useTranslations(lang)

const rawPath =
	typeof Astro !== 'undefined' && Astro.request ? new URL(Astro.request.url).pathname : '/'
const currentPath = rawPath.replace(/\/+$/, '') || '/'
const privacyPath = lang === 'es' ? '/PrivacyPolicy' : `/${lang}/PrivacyPolicy`
---

<footer class="mb-16 mt-auto">
	<SocialLinks />

	<div
		class="text-xs flex flex-col items-center justify-center gap-x-6 gap-y-2 text-zinc-600 dark:text-zinc-400 sm:text-sm md:flex-row"
	>
		<!-- Astro -->
		<div class="flex">
			<span class="mr-1">{t('footer.astro')}</span>
			<a
				href="https://astro.build/"
				target="_blank"
				rel="noopener noreferrer"
				class="flex items-center gap-1.5"
			>
				<span class="font-bold text-[#e63ba9]">Astro</span>
				<AstroLogo class="h-4 w-4" />
			</a>
		</div>

		<span class="hidden text-zinc-400 dark:text-zinc-600 md:block">•</span>

		<!-- GitHub -->
		<a
			href="https://github.com/hunkstalker/denis-anfruns-web"
			target="_blank"
			rel="noopener noreferrer"
			class="flex items-center gap-1.5 transition-colors hover:text-zinc-900 dark:hover:text-zinc-100"
			title="Ver código en GitHub"
		>
			<GithubFill class="h-4 w-4" />
			<span>{t('footer.github')}</span>
		</a>

		<!-- Política de privacidad -->
		{
			currentPath !== privacyPath && (
				<>
					<span class="hidden text-zinc-400 dark:text-zinc-600 md:block">•</span>
					<a
						href={`${privacyPath}/`}
						class="transition-colors hover:text-zinc-900 dark:hover:text-zinc-200"
					>
						{t('footer.privacy')}
					</a>
				</>
			)
		}
	</div>
</footer>
