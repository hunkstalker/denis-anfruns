---
import { seriesData } from '../../data/series'
import GithubIcon from '../../icons/github.svg'
import ExternalLink from '../../icons/external-link.svg'
import { useTranslations } from '../../i18n/utils'
import type { SupportedLang } from '../../utils/blogi18n'

interface Props {
	seriesId: string
	lang?: SupportedLang
}

const { seriesId, lang = 'es' } = Astro.props
const t = useTranslations(lang)

const series = seriesData[seriesId]

if (!series || !series.githubUrl) {
	return null
}

const texts = series.texts?.[lang]
const title = texts?.title || t('series.github.title')
const description = texts?.description || t('series.github.description')
const buttonText = texts?.button || t('series.github.button')
---

<div class="mt-8 border-t border-zinc-100 pt-8 dark:border-zinc-800">
	<div
		class="rounded-lg border border-zinc-200 bg-zinc-50 p-4 dark:border-zinc-800 dark:bg-zinc-900/50"
	>
		<div class="flex items-start justify-between gap-4">
			<div>
				<h3 class="mb-1 text-sm font-semibold text-zinc-900 dark:text-zinc-100">
					{title}
				</h3>
				<p class="text-xs mb-3 leading-relaxed text-zinc-500 dark:text-zinc-400">
					{description}
				</p>
			</div>
			<div
				class="rounded-md border border-zinc-200 bg-white p-2 text-zinc-900 shadow-sm dark:border-zinc-700 dark:bg-zinc-800 dark:text-white"
			>
				<GithubIcon class="size-5" />
			</div>
		</div>

		<a
			href={series.githubUrl}
			target="_blank"
			rel="noopener noreferrer"
			class="text-xs flex w-full items-center justify-center gap-2 rounded-md bg-zinc-900 px-4 py-2 font-medium text-white transition-colors hover:bg-zinc-800 dark:bg-zinc-100 dark:text-zinc-900 dark:hover:bg-zinc-200"
		>
			{buttonText}
			<ExternalLink class="size-3.5" />
		</a>
	</div>
</div>
